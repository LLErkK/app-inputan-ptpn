<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload File dan Tanggal</title>
    <link rel="stylesheet" href="/css/upload.css">
</head>
<body>
<div class="container">
    <h2>ðŸ“‹ Form Upload</h2>

    <form id="uploadForm" novalidate>
        <div class="form-group">
            <label for="tanggal">Pilih Tanggal</label>
            <input type="date" id="tanggal" name="tanggal" required>
        </div>

        <div class="form-group">
            <label for="afdeling">Pilih Afdeling</label>
            <select id="afdeling" name="afdeling" required>
                <option value="">-- Pilih Afdeling --</option>
                <option value="Klepu">Klepu</option>
                <option value="Setro">Setro</option>
                <option value="Jatiroenggo">Jatiroenggo</option>
                <option value="Gebugan">Gebugan</option>
            </select>
        </div>

        <div class="form-group">
            <label>Upload File</label>
            <div class="file-upload-wrapper">
                <input type="file" id="fileInput" name="file" accept=".csv,.xlsx,.xls" required>
                <label for="fileInput" class="file-upload-label">
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                              d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                    </svg>
                    Pilih File
                </label>
            </div>
            <div class="file-name" id="fileName">
                <div class="file-badge">Belum ada file dipilih</div>
                <div class="file-meta" id="fileMeta"></div>
            </div>
        </div>

        <button type="submit" class="submit-btn" id="submitBtn">Submit</button>

        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p style="margin-top: 10px;">Uploading...</p>
        </div>
        
        <div style="margin-top:18px;">
            <button type="button" id="openDeleteMasterModalBtn" class="submit-btn" 
                style="background: linear-gradient(135deg, #ff4d4f, #ff6b6b);">Hapus Master</button>
        </div>
    </form>

    <!-- Modal: Daftar Master untuk Hapus -->
    <div id="deleteMasterModal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.45); z-index:1000; min-height:100vh;">
      <div style="position:fixed; left:50%; top:50%; transform:translate(-50%,-50%); background:#fff; width:90%; max-width:900px; border-radius:10px; padding:16px; box-shadow:0 10px 30px rgba(0,0,0,0.2);">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
          <h3 style="margin:0">Daftar Master</h3>
          <button id="deleteMasterModalClose" style="background:transparent;border:0;font-size:18px;cursor:pointer">âœ•</button>
        </div>
        <div style="max-height:60vh; overflow:auto;">
          <table style="width:100%; border-collapse:collapse;">
            <thead>
              <tr>
                <th style="text-align:left; padding:8px; border-bottom:1px solid #eee">ID</th>
                <th style="text-align:left; padding:8px; border-bottom:1px solid #eee">Tanggal</th>
                <th style="text-align:left; padding:8px; border-bottom:1px solid #eee">Afdeling</th>
                <th style="text-align:left; padding:8px; border-bottom:1px solid #eee">File</th>
                <th style="text-align:right; padding:8px; border-bottom:1px solid #eee">Aksi</th>
              </tr>
            </thead>
            <tbody id="masterListBody"><tr><td colspan="5" style="text-align:center; padding:12px; color:#666;">Memuat...</td></tr></tbody>
          </table>
        </div>
        <div id="masterModalLoading" style="display:none; text-align:center; margin-top:8px;">Memuat...</div>
      </div>
    </div>

    <div class="result" id="result">
        <h3 id="resultTitle">âœ… Data Berhasil Disubmit</h3>
        <p><strong>Tanggal:</strong> <span id="resultDate"></span></p>
        <p><strong>Afdeling:</strong> <span id="resultAfdeling"></span></p>
        <p><strong>File:</strong> <span id="resultFile"></span></p>
        <p><strong>Ukuran:</strong> <span id="resultSize"></span></p>
    </div>
</div>

<script src="/js/upload.js"></script>
</body>
</html>